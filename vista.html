<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Vista semanal</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
  --primary:#2f3bff;
  --bg:#f5f7fb;
  --card:#ffffff;
  --text:#1e293b;
  --muted:#94a3b8;
}

body{
  margin:0;
  font-family:system-ui;
  background:var(--bg);
  color:var(--text);
  padding:16px;
}

.card{
  background:var(--card);
  border-radius:14px;
  padding:14px;
  margin-bottom:20px;
  box-shadow:0 10px 25px rgba(0,0,0,.05);
}

table{
  width:100%;
  border-collapse:collapse;
}

th,td{
  border:1px solid #e5e7eb;
  padding:6px;
  vertical-align:top;
  font-size:13px;
}

th{background:#eef2ff}

.activity{
  background:#f1f5ff;
  border-radius:6px;
  padding:4px;
  margin:4px 0;
}
button{
  background:var(--primary);
  color:white;
  border:none;
  padding:6px 10px;
  border-radius:6px;
  cursor:pointer;
}
</style>
</head>

<body>

<div class="card">
  <button onclick="history.back()">⬅ Volver</button>
</div>

<div id="contenido"></div>

<script>
const dias=["Lunes","Martes","Miércoles","Jueves","Viernes","Sábado","Domingo"];
const getS=()=>JSON.parse(localStorage.getItem("semanas"))||[];

const id=new URLSearchParams(location.search).get("id");
const semana=getS().find(s=>s.id===id);

if(!semana){
  contenido.innerHTML="<div class='card'>Semana no encontrada</div>";
}else{
  const div=document.createElement("div");
  div.className="card";
  div.innerHTML=`<h3>${semana.titulo}</h3>`;

  const table=document.createElement("table");
  const head=document.createElement("tr");
  dias.forEach(d=>head.innerHTML+=`<th>${d}</th>`);
  table.appendChild(head);

  const row=document.createElement("tr");
  dias.forEach(d=>{
    const td=document.createElement("td");
    (semana.actividades[d]||[])
      .sort((a,b)=>a.hora.localeCompare(b.hora))
      .forEach(a=>{
        const divA=document.createElement("div");
        divA.className="activity";
        divA.innerHTML=`<strong>${a.hora}</strong> ${a.texto}`;
        td.appendChild(divA);
      });
    row.appendChild(td);
  });

  table.appendChild(row);
  div.appendChild(table);
  contenido.appendChild(div);
}
</script>

</body>
</html>
